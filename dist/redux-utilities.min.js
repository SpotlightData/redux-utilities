!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SRU={})}(this,function(e){"use strict";function t(e,t,r){return r.reduce(e,t)}function r(e){return JSON.parse(JSON.stringify(e))}var n=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var i=require("yup");i.object().shape({key:i.string().required(),cases:i.object().required(),initialState:i.object()});var u=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(e){return Promise.reject(e)}}}}catch(e){}return function(e){return function(){try{return Promise.resolve(e.apply(this,Array.prototype.slice.call(arguments)))}catch(e){return Promise.reject(e)}}}}();var a=u(function(e,t,r){return function(e,t,r){if(r)return t?t(e()):e();try{var n=e();return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}catch(e){return Promise.reject(e)}}(t.shift(),function(n){n._error&&r&&e.open(n),a(e,t)})}),c=u(function(e,t,r){return n=Promise.all(t),o=function(t){t.map(function(t){t._error&&r&&e.open(t)})},i?o?o(n):n:(n=Promise.resolve(n),o?n.then(o):n);var n,o,i});var f={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l=Object.defineProperty,p=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,h=v&&v(Object);var b=require("yup");b.object().shape({key:b.string().required(),type:b.object().required(),initialState:b.object(),cases:b.object()});e.makeType=function(e,r){return t(function(t,r){return Object.assign(n({},r,e+"_"+r),t)},{},r.concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]))},e.applyReducer=function(e){return[e.key,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments[1];if(void 0===e[n.type])return r;var o=e[n.type](r,n);return Object.assign({},r,o)}}(e.cases,e.initialState)]},e.runActions=function(e){var t=1>=arguments.length||void 0===arguments[1]||arguments[1];if("function"!=typeof e.open)throw TypeError("Expected handler.open to be a function");return function(r){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a(e,r,t):c(e,r,t)}},e.flattenReducers=function(e){return t(function(e,t){var r=o(t,2);return e[r[0]]=r[1],e},{},e)},e.withMappedActions=function(e,t,r,n){return function(o){var i=o.displayName||o.name,u=function(i){return n(o,Object.assign({},i,{actions:e(t,i,r)}))};return u.WrappedComponent=o,u.displayName="withMappedActions("+i+")",function e(t,r,n){if("string"!=typeof r){if(h){var o=v(r);o&&o!==h&&e(t,o,n)}var i=p(r);y&&(i=i.concat(y(r)));for(var u=0;i.length>u;++u){var a=i[u];if(!(f[a]||s[a]||n&&n[a])){var c=d(r,a);try{l(t,a,c)}catch(e){}}}return t}return t}(u,o)}},e.mapActionsToBackEnd=function(e,t,r){var n=t.token,o=t.dispatch;if(!(e instanceof Object)||Array.isArray(e))throw TypeError("Actions should be an object");if("string"!=typeof n)throw TypeError("Token string needs to be passed");if(!o||"function"!=typeof o)throw TypeError("Dispatch should be a function");var i=r(n);return Object.keys(e).reduce(function(t,r){return t[r]=e[r](i,o),t},{})},e.extendDefaultReducer=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=e.key,u=e.type,a=e.cases,c=Object.assign({all:[],current:{},loading:!0,failed:!1,unmounted:!1},e.initialState||{});return{key:i,cases:Object.assign((t={},n(t,u.GET_ALL,function(e,t){return{all:t.all,loading:!1,unmounted:!1}}),n(t,u.GET_ONE,function(e,t){return{current:t.current,loading:!1,unmounted:!1}}),n(t,u.LOADING,function(e,t){return{loading:!0,unmounted:!1}}),n(t,u.LOADING_DONE,function(e,t){return{loading:!1}}),n(t,u.UNMOUNT,function(e,t){return{unmounted:!0}}),n(t,u.FAILED,function(e,t){return{loading:!1,failed:!0,unmounted:!1}}),n(t,u.CLEAR,function(){return o(c)}),t),a),initialState:o(c)}},Object.defineProperty(e,"__esModule",{value:!0})});
