!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SRU={})}(this,function(e){"use strict";function t(e,t,n){return n.reduce(e,t)}const n=require("yup");n.object().shape({key:n.string().required(),cases:n.object().required(),initialState:n.object()});var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,c=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,p=s&&s(Object);const f=require("yup");f.object().shape({key:f.string().required(),type:f.object().required(),initialState:f.object(),cases:f.object()});e.makeType=function(e,n,r=[]){return t((t,n)=>Object.assign({[n]:`${e}_${n}`},t),{},n.concat(r))},e.applyReducer=function(e){return[e.key,function(e,t={}){return(n=t,r)=>{if(void 0===e[r.type])return n;const o=e[r.type](n,r);return Object.assign({},n,o)}}(e.cases,e.initialState)]},e.runActions=function(e,t=!0){if("function"!=typeof e.open)throw TypeError("Expected handler.open to be a function");return(n,r=!1)=>r?async function e(t,n,r){const o=n.shift(),i=await o();i._error&&r&&t.open(i),e(t,n)}(e,n,t):async function(e,t,n){(await Promise.all(t)).map(t=>{t._error&&n&&e.open(t)})}(e,n,t)},e.flattenReducers=function(e){return t((e,t)=>{const[n,r]=t;return e[n]=r,e},{},e)},e.withMappedActions=((e,t,n,f)=>d=>{const y=d.displayName||d.name,l=r=>f(d,Object.assign({},r,{actions:e(t,r,n)}));return l.WrappedComponent=d,l.displayName=`withMappedActions(${y})`,function e(t,n,f){if("string"!=typeof n){if(p){var d=s(n);d&&d!==p&&e(t,d,f)}var y=c(n);a&&(y=y.concat(a(n)));for(var l=0;y.length>l;++l){var b=y[l];if(!(r[b]||o[b]||f&&f[b])){var g=u(n,b);try{i(t,b,g)}catch(e){}}}return t}return t}(l,d)}),e.mapActionsToBackEnd=function(e,t,n){const{token:r,dispatch:o}=t;if(!(e instanceof Object)||Array.isArray(e))throw TypeError("Actions should be an object");if("string"!=typeof r)throw TypeError("Token string needs to be passed");if(!o||"function"!=typeof o)throw TypeError("Dispatch should be a function");const i=n(r);return Object.keys(e).reduce((t,n)=>(t[n]=e[n](i,o),t),{})},e.extendDefaultReducer=function(e,t=function(e){return JSON.parse(JSON.stringify(e))}){const{key:n,type:r,cases:o}=e,i=Object.assign({all:[],current:{},loading:!0,failed:!1,unmounted:!1},e.initialState||{});return{key:n,cases:Object.assign({[r.GET_ALL]:function(e,{all:t}){return{all:t,loading:!1,unmounted:!1}},[r.GET_ONE]:function(e,{current:t}){return{current:t,loading:!1,unmounted:!1}},[r.LOADING]:function(e,t){return{loading:!0,unmounted:!1}},[r.LOADING_DONE]:function(e,t){return{loading:!1}},[r.UNMOUNT]:function(e,t){return{unmounted:!0}},[r.FAILED]:function(e,t){return{loading:!1,failed:!0,unmounted:!1}},[r.CLEAR]:function(){return t(i)}},o),initialState:t(i)}},Object.defineProperty(e,"__esModule",{value:!0})});
